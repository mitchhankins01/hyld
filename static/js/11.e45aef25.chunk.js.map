{"version":3,"sources":["pages/Home/Home.js"],"names":["HomePage","defaultTickers","toastPositioning","vertical","horizontal","iex","IEXCloudClient","axios","version","publishable","useState","error","setError","events","setEvents","enqueueSnackbar","useSnackbar","loading","setLoading","tickerInput","setTickerInput","tickers","setTickers","moment","state","setState","formatNumber","format","prefix","truncate","padRight","React","useEffect","a","batchSymbols","dividends","res","console","log","Error","variant","anchorOrigin","String","onClickAdd","length","includes","renderDay","day","Object","keys","map","key","toISOString","slice","exDate","sorted","property","value","sort","b","title","style","padding","fontSize","Number","amount","index","display","justifyContent","margin","fontWeight","split","charAt","toUpperCase","substr","width","marginTop","size","color","label","icon","pageTitle","height","flex","open","zIndex","alignItems","ticker","eventsLength","marginRight","background","onDelete","deleteTicker","filter","component","onClick","disabled","JSON","stringify","onKeyDown","event","keyCode","preventDefault","onChange","target","placeholder","orientation","date","onChangeMonth","onPickDate","classNames","e","className","isSame","renderHeader","onPrevMonth","onNextMonth","blue","startIcon","endIcon"],"mappings":"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","file":"static/js/11.e45aef25.chunk.js","sourcesContent":["import Page from 'material-ui-shell/lib/containers/Page'\r\nimport React from 'react'\r\nimport Scrollbar from 'material-ui-shell/lib/components/Scrollbar/Scrollbar'\r\nimport { useIntl } from 'react-intl'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport { Calendar } from 'react-calendar-component';\r\nimport moment from 'moment';\r\nimport { useState } from 'react';\r\nimport './App.css';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport blue from '@material-ui/core/colors/blueGrey'\r\nimport { IEXCloudClient } from 'node-iex-cloud';\r\nimport axios from 'axios';\r\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport InputBase from '@material-ui/core/InputBase';\r\n// import Paper from '@material-ui/core/Paper';\r\n// import Typography from '@material-ui/core/Typography';\r\n// import Box from '@material-ui/core/Box';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport RestoreIcon from '@material-ui/icons/Restore';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { useSnackbar } from 'notistack';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport format from 'format-number';\r\n\r\nconst HomePage = () => {\r\n  const defaultTickers = ['HFRO', 'NNN', 'AAPL'];\r\n  const toastPositioning = { vertical: 'bottom', horizontal: 'left' };\r\n  const iex = new IEXCloudClient(axios, {\r\n    version: 'stable',\r\n    publishable: 'pk_6260c74f116e4a78af6d9913806d951d',\r\n  });\r\n\r\n  const [error, setError] = useState(null);\r\n  const [events, setEvents] = useState({});\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const [loading, setLoading] = useState(false);\r\n  const [tickerInput, setTickerInput] = useState('');\r\n  const [tickers, setTickers] = useState(defaultTickers);\r\n  const [state, setState] = useState(moment('2020-11-15'));\r\n  const formatNumber = format({ prefix: '$', truncate: 2, padRight: 2 });\r\n\r\n  React.useEffect(() => {\r\n    (async function () {\r\n      try {\r\n        setLoading(true);\r\n        setTickerInput('');\r\n        const res = await iex.batchSymbols(tickers).dividends()\r\n        console.log(res);\r\n        if (typeof res === 'string') {\r\n          throw new Error(res);\r\n        }\r\n        await setEvents(res);\r\n        setLoading(false);\r\n        enqueueSnackbar('Dividend Data Reloaded', {\r\n          variant: 'success',\r\n          anchorOrigin: toastPositioning,\r\n        });\r\n      } catch (error) {\r\n        setError(String(error));\r\n        setLoading(false);\r\n      }\r\n\r\n    })()\r\n  }, [tickers]);\r\n\r\n  React.useEffect(() => {\r\n    if (error) {\r\n      enqueueSnackbar(error, {\r\n        variant: 'error',\r\n        anchorOrigin: toastPositioning,\r\n      });\r\n    }\r\n  }, [error]);\r\n\r\n\r\n  const onClickAdd = () => {\r\n    if (tickers.length >= 4) {\r\n      return enqueueSnackbar('Shucks! This prototype is limited to four tickers', {\r\n        variant: 'error',\r\n        anchorOrigin: toastPositioning,\r\n      });\r\n    }\r\n\r\n    if (tickerInput && !tickers.includes(tickerInput)) {\r\n      setTickers([...tickers, tickerInput]);\r\n      return enqueueSnackbar(`Boom, ${tickerInput} Added`, {\r\n        variant: 'info',\r\n        anchorOrigin: toastPositioning,\r\n      });\r\n    }\r\n  }\r\n\r\n  const onClickReset = () => setTickers(defaultTickers)\r\n\r\n  const onChangeTickerInput = event => setTickerInput(event.target.value.toUpperCase());\r\n  const onKeyDownTickerInput = event => {\r\n    if (event.keyCode === 13) {\r\n      event.preventDefault();\r\n      onClickAdd();\r\n    }\r\n  }\r\n\r\n  const onDeleteTicker = deleteTicker =>\r\n    setTickers([...tickers.filter(ticker => ticker !== deleteTicker)]);\r\n\r\n  const renderDay = day => {\r\n    return Object.keys(events).map(key => {\r\n      if (events[key]['dividends'] && events[key]['dividends'][0] && day.toISOString().slice(0, 10) === events[key]['dividends'][0].exDate) {\r\n        const sorted = Object.keys(events[key]['dividends'][0]).map(property => {\r\n          return { property, value: events[key]['dividends'][0][property] };\r\n        }).sort((a, b) => (a.value.length > b.value.length) ? 1 : -1);\r\n\r\n        return (\r\n          <Tooltip\r\n            title={\r\n              <div style={{ padding: 2, fontSize: '1rem' }}>\r\n                {[\r\n                  {\r\n                    property: 'Total Income',\r\n                    value: formatNumber(Number(events[key]['dividends'][0].amount * 3324))\r\n                  },\r\n                  ...sorted\r\n                ].map(({ property, value }, index) => (\r\n                  <div key={property} style={{ display: 'flex', justifyContent: 'space-between', margin: index === 0 ? '20px 7px 20px 7px' : 7, fontWeight: index === 0 && 800 }}>\r\n                    <span>{property.split(/(?=[A-Z])/).map(a => a.charAt(0).toUpperCase() + a.substr(1) + ' ')}</span>\r\n                    <span style={{ width: 20 }} />\r\n                    <span>{value}</span>\r\n                  </div>\r\n                ))}\r\n                <span style={{ display: 'flex', justifyContent: 'flex-end', margin: 7, marginTop: 15, fontSize: '0.8rem' }}>Source: IEX</span>\r\n              </div>\r\n            }\r\n          >\r\n            <Chip size='small' color='primary' style={{ display: 'flex', justifyContent: 'center' }} key={events[key]['dividends'][0].exDate} label={key} icon={<AttachMoneyIcon fontSize='small' />} />\r\n          </Tooltip>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Page pageTitle='HYLD - Dividend Tracker'>\r\n      <Scrollbar\r\n        style={{ height: '100%', width: '100%', display: 'flex', flex: 1 }}\r\n      >\r\n        <Backdrop open={loading} style={{ zIndex: 99 }}>\r\n          <CircularProgress size={80} style={{ zIndex: 999 }} />\r\n        </Backdrop>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', margin: 15 }}>\r\n          <div>\r\n            {tickers.map(ticker => {\r\n              const eventsLength = events[ticker] && events[ticker]['dividends'] ? events[ticker]['dividends'].length : 0;\r\n              return (\r\n                <Chip style={{ marginRight: 5, background: eventsLength === 0 && 'rgba(255, 0, 0, 0.5)' }} key={ticker} label={`${ticker}: ${eventsLength}`} onDelete={() => onDeleteTicker(ticker)} />\r\n              )\r\n            })}\r\n          </div>\r\n          <div>\r\n            <Paper component=\"form\">\r\n              <IconButton onClick={onClickReset} disabled={JSON.stringify(tickers) === JSON.stringify(defaultTickers)} >\r\n                <RestoreIcon />\r\n              </IconButton>\r\n              <InputBase onKeyDown={onKeyDownTickerInput} onChange={onChangeTickerInput} value={tickerInput} placeholder='Add Ticker' />\r\n              <IconButton onClick={onClickAdd} >\r\n                <SearchIcon />\r\n              </IconButton>\r\n              <Divider orientation=\"vertical\" />\r\n\r\n            </Paper>\r\n            {/* <Button variant='contained' color='primary' onClick={onClickAdd}>Add Ticker</Button> */}\r\n          </div>\r\n        </div>\r\n        <Paper style={{ margin: '0 15px' }}>\r\n          <Calendar\r\n            date={state}\r\n            onChangeMonth={date => setState(date)}\r\n            onPickDate={date => console.log(date)}\r\n            renderDay={({ day, classNames, onPickDate }) => (\r\n              <div\r\n                key={day.format()}\r\n                onClick={e => onPickDate(day)}\r\n                className={`Calendar-grid-item ${day.isSame(moment(), 'day') && 'Calendar-grid-item--current'} ${classNames}`}\r\n              >\r\n                {day.format('D')}\r\n                {renderDay(day)}\r\n              </div>\r\n            )}\r\n            renderHeader={({ date, onPrevMonth, onNextMonth }) => (\r\n              <div className=\"Calendar-header\" style={{ background: blue[300] }}>\r\n                <Button style={{ color: 'white' }} color='secondary' onClick={onPrevMonth} startIcon={<ArrowBackIcon />}>\r\n                  Previous\r\n              </Button>\r\n                <div className=\"Calendar-header-currentDate\">\r\n                  {date.format('MMMM YYYY')}\r\n                </div>\r\n                <Button style={{ color: 'white' }} color='secondary' onClick={onNextMonth} endIcon={<ArrowForwardIcon />}>\r\n                  Next\r\n              </Button>\r\n              </div>\r\n            )}\r\n          />\r\n        </Paper>\r\n\r\n\r\n        \r\n      </Scrollbar>\r\n    </Page>\r\n  )\r\n}\r\nexport default HomePage\r\n"],"sourceRoot":""}